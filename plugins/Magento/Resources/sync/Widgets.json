{
"Magento-profile":{"css":"","description":"Magento Profile Integration","html":"Loading...","insert_position":"below","js":"var el = this.contentEl,\r\n\tcontainer = this.containerEl,\r\n\ttab = this.tabEl;\r\n\r\nvar error = function(error) {\r\n\tel.text(error);\r\n};\r\n\r\nvar appendCount = function(count) {\r\n\ttab.append(' <span>('+count+')<\/span>');\r\n};\r\n\r\n$.ajax({\r\n\turl: BASE_URL + 'agent\/plugins\/Magento\/run\/call-api',\r\n\tdata: {email: \"{{email}}\"},\r\n\tdataType: 'json',\r\n\tsuccess: function(data) {\r\n\t\tif (data.error) {\r\n\t\t\terror(data.error);\r\n\t\t} else if (!data.matched) {\r\n\t\t\tcontainer.hide();\r\n\t\t\tel.text('No matching customers.');\r\n\t\t\tappendCount(0);\r\n\t\t} else {\r\n\t\t\tvar html = [], person, orders, order;\r\n\r\n\t\t\tappendCount(data.matches.length);\r\n\r\n\t\t\thtml.push('<ul style=\"font-size: 11px\">');\r\n\t\t\tfor (var i = 0; i < data.matches.length; i++) {\r\n\t\t\t\tperson = data.matches[i], orders = person.orders;\r\n\t\t\t\thtml.push('<li>&bull; <a href=\"'+person.profile+'\" target=\"_blank\">'+person.name+'<\/a> ('+person.email+')<\/li>');\r\n\t\t\t\tif (orders.length) {\r\n\t\t\t\t\thtml.push('<ul style=\"margin-left: 10px\">');\r\n\t\t\t\t\tfor (var j = 0; j < orders.length; j++) {\r\n\t\t\t\t\t\torder = orders[j];\r\n\t\t\t\t\t\thtml.push('<li>&bull; Order <a href=\"'+order.url+'\" target=\"_blank\">#' + order.id + '<\/a> - ' + order.grand_total + ' ' + order.currency + ' (' + order.created_at + ')<\/li>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\thtml.push('<\/ul>');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\thtml.push('<\/ul>')\r\n\r\n\t\t\tel.html(html.join(\"\\n\"));\r\n\t\t}\r\n\r\n\t},\r\n\terror: function() {\r\n\t\terror(\"Data could not be retrieved at this time.\");\r\n\t}\r\n});","page":"profile","page_location":"contact","title":"Magento"},
"Magento-ticket":{"css":"","description":"Magento Ticket Integration","html":"Loading...","insert_position":"tab","js":"var el = this.contentEl,\r\n\tcontainer = this.containerEl,\r\n\ttab = this.tabEl;\r\n\r\nvar error = function(error) {\r\n\tel.text(error);\r\n};\r\n\r\nvar appendCount = function(count) {\r\n\ttab.append(' <span>('+count+')<\/span>');\r\n};\r\n\r\n$.ajax({\r\n\turl: BASE_URL + 'agent\/plugins\/Magento\/run\/call-api',\r\n\tdata: {email: \"{{person.email}}\"},\r\n\tdataType: 'json',\r\n\tsuccess: function(data) {\r\n\t\tif (data.error) {\r\n\t\t\terror(data.error);\r\n\t\t} else if (!data.matched) {\r\n\t\t\tcontainer.hide();\r\n\t\t\tel.text('No matching customers.');\r\n\t\t\tappendCount(0);\r\n\t\t} else {\r\n\t\t\tvar html = [], person, orders, order;\r\n\r\n\t\t\tappendCount(data.matches.length);\r\n\r\n\t\t\thtml.push('<ul style=\"font-size: 11px\">');\r\n\t\t\tfor (var i = 0; i < data.matches.length; i++) {\r\n\t\t\t\tperson = data.matches[i], orders = person.orders;\r\n\t\t\t\thtml.push('<li>&bull; <a href=\"'+person.profile+'\" target=\"_blank\">'+person.name+'<\/a> ('+person.email+')<\/li>');\r\n\t\t\t\tif (orders.length) {\r\n\t\t\t\t\thtml.push('<ul style=\"margin-left: 10px\">');\r\n\t\t\t\t\tfor (var j = 0; j < orders.length; j++) {\r\n\t\t\t\t\t\torder = orders[j];\r\n\t\t\t\t\t\thtml.push('<li>&bull; Order <a href=\"'+order.url+'\" target=\"_blank\">#' + order.id + '<\/a> - ' + order.grand_total + ' ' + order.currency + ' (' + order.created_at + ')<\/li>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\thtml.push('<\/ul>');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\thtml.push('<\/ul>')\r\n\r\n\t\t\tel.html(html.join(\"\\n\"));\r\n\t\t}\r\n\r\n\t},\r\n\terror: function() {\r\n\t\terror(\"Data could not be retrieved at this time.\");\r\n\t}\r\n});","page":"ticket","page_location":"people","title":"Magento"}
}